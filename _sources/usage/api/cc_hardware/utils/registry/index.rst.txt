
:py:mod:`cc_hardware.utils.registry`
====================================


.. py:module:: cc_hardware.utils.registry

.. autoapi-nested-parse::

   A module that provides a base Registry class to register and instantiate classes.

   .. rubric:: Example

   from my_registry import Registry, register

   @register
   class MyClass(Registry):
       def __init__(self, value):
           self.value = value

   # Create instance
   instance = MyClass.create_from_registry('MyClass', 'hello')
   print(instance.value)  # 'hello'

   # Register lazily
   MyClass.register("MyOtherClass", "path.to.my_module")

   # Create instance lazily
   other_instance = MyClass.create_from_registry('MyOtherClass', some_arg='value')
   print(other_instance)



Module Contents
---------------

Classes
~~~~~~~

.. autoapisummary::

   cc_hardware.utils.registry.Registry



Functions
~~~~~~~~~

.. autoapisummary::

   cc_hardware.utils.registry.register



.. py:class:: Registry

   Base class providing a registry for its subclasses, plus a factory method.

   This class supports both direct and lazy registration of subclasses and
   can also associate a registered class with a 'friend' (another class not
   necessarily inheriting from Registry).

   .. rubric:: Examples

   Register directly:
       @MyRegistry.register
       class Foo(MyRegistry):
           pass

   Register by name (lazy):
       MyRegistry.register("Bar", "my_module.submodule")

   Create instance:
       instance = MyRegistry.create_from_registry("Foo")

   Create instance from one of many registries:
       instance = MyRegistry.create_from_registry("Bar")


   .. py:method:: register(class_type)
                  register(class_name: str, module_path: str) -> None
                  register(class_name: str, module_path: str, friend: str) -> None
      :classmethod:


      Registers a class in this registry.

      :Parameters: * **class_type** (*type[Self] | str*) -- A class object or a class name for lazy
                     loading.
                   * **module_path** (*str | None*) -- Path to the module if `class_type` is a string.
                   * **friend** (*str | None*) -- Name of another class to associate with this class.

      :returns: *type[Self] | None* --

                The registered class if `class_type` is a type,
                    otherwise None.



   .. py:method:: create_from_registry(name = None, *args, **kwargs)
      :classmethod:


      Creates an instance of a registered class, performing lazy loading if necessary.

      :Parameters: * **name** (*str | None*) -- The name of the class to instantiate. If None,
                     and only one class is registered, it will instantiate that class.
                   * **\*args** (*Any*) -- Positional arguments to pass to the class constructor.
                   * **\*\*kwargs** (*Any*) -- Keyword arguments to pass to the class constructor.

      :returns: *Self | Any* --

                An instance of the requested class, or an associated
                    'friend' class.



   .. py:method:: registry()

      Get the registry for this class.

      :returns: A dictionary mapping class names to class objects or lazy load paths.



   .. py:method:: registered()

      Get an enumeration of the registered classes.

      :returns: An enumeration of the registered classes.



.. py:function:: register(class_type)

   Decorator to register a class with its base Registry class. Uses a recursive
   approach to ensure that the class is registered with all Registry-based ancestors.

   :Parameters: **class_type** -- The class to register.

   :returns: The registered class.


